local UIS = game:GetService("UserInputService")
local function CreateMain(title)
	local gui, children = game.CoreGui, game.CoreGui:GetChildren()
	for i = 1, #children do if children[i].Name == title then children[i]:Destroy() end end
	local Rodus = Instance.new("ScreenGui", gui)
	Rodus.Name, Rodus.ZIndexBehavior = title, Enum.ZIndexBehavior.Sibling
	local Top = Instance.new("Frame", Rodus)
	Top.Name, Top.Size, Top.Position = "Top", UDim2.new(0,193,0,27), UDim2.new(0,15,0,15)
	Top.BackgroundColor3, Top.BackgroundTransparency, Top.BorderColor3, Top.BorderSizePixel = Color3.new(), .5, Color3.new(), 4
	local Title = Instance.new("TextLabel", Top)
	Title.Name, Title.Size, Title.Font, Title.Text = "Title", UDim2.new(0,193,0,27), Enum.Font.JosefinSans, " "..title
	Title.BackgroundColor3, Title.BackgroundTransparency, Title.TextColor3, Title.TextSize, Title.TextXAlignment = Color3.new(), .35, Color3.fromRGB(0,255,0), 14, Enum.TextXAlignment.Left
	local Container = Instance.new("Frame", Top)
	Container.Name, Container.Position, Container.Size = "Container", UDim2.new(0,0,1.3,0), UDim2.new(0,193,0,24)
	Container.BackgroundColor3, Container.BackgroundTransparency, Container.BorderColor3, Container.BorderSizePixel = Color3.new(), .5, Color3.new(), 4
	local UIListLayout = Instance.new("UIListLayout", Container)
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	local Minimize = Instance.new("TextButton", Top)
	Minimize.Name, Minimize.Size, Minimize.Position = "Minimize", UDim2.new(0,18,0,17), UDim2.new(.91,0,.18,0)
	Minimize.BackgroundTransparency, Minimize.Font, Minimize.Text, Minimize.TextColor3, Minimize.TextSize = 1, Enum.Font.SourceSans, "-", Color3.new(1,1,1), 14
	local toggled = false
	Minimize.MouseButton1Down:Connect(function()
		toggled = not toggled
		Minimize.Text, Container.Visible = toggled and "+" or "-", not toggled
	end)
	UIS.InputBegan:Connect(function(i)
		if i.KeyCode == Enum.KeyCode.RightControl then Top.Visible = not Top.Visible end
	end)
	
	local function updateSize(frame)
		local layout = frame:FindFirstChildOfClass("UIListLayout")
		if layout then
			frame.Size = UDim2.new(0, layout.AbsoluteContentSize.X, 0, layout.AbsoluteContentSize.Y)
		end
	end
	
	local function CreateTab(text)
		local Tab = Instance.new("TextButton", Container)
		Tab.Name, Tab.Size, Tab.Font, Tab.Text = text, UDim2.new(0,193,0,24), Enum.Font.JosefinSans, " "..text
		Tab.BackgroundTransparency, Tab.TextColor3, Tab.TextSize, Tab.TextXAlignment = 1, Color3.new(1,1,1), 14, Enum.TextXAlignment.Left
		local Arrow = Instance.new("TextLabel", Tab)
		Arrow.Name, Arrow.Size, Arrow.BackgroundTransparency, Arrow.Font, Arrow.Text = "Arrow", UDim2.new(0,18,0,21), 1, Enum.Font.SourceSans, ">>"
		Arrow.Position, Arrow.TextColor3, Arrow.TextScaled = UDim2.new(0.907,0,0,0), Color3.new(1,1,1), true
		local TabContainer = Instance.new("Frame", Tab)
		TabContainer.Name, TabContainer.Position, TabContainer.Visible = "TabContainer", UDim2.new(1.057,0,0,0), false
		TabContainer.Size, TabContainer.BackgroundColor3, TabContainer.BackgroundTransparency, TabContainer.BorderColor3, TabContainer.BorderSizePixel = UDim2.new(0,193,0,24), Color3.new(), .5, Color3.new(), 4
		local UIListLayout2 = Instance.new("UIListLayout", TabContainer)
		UIListLayout2.SortOrder = Enum.SortOrder.LayoutOrder
		
		Tab.MouseButton1Down:Connect(function()
			local desc = Container:GetDescendants()
			for i = 1, #desc do
				local d = desc[i]
				if d.Name == "TabContainer" then
					d.Visible = false
					d.Parent.TextColor3 = Color3.new(1,1,1)
					d.Parent.Arrow.TextColor3 = Color3.new(1,1,1)
				end
			end
			local active = not TabContainer.Visible
			TabContainer.Visible = active
			Tab.TextColor3 = active and Color3.fromRGB(0,255,0) or Color3.new(1,1,1)
			Tab.Arrow.TextColor3 = Tab.TextColor3
			updateSize(Container)
		end)
		
		local function CreateButton(buttonText, note, callback)
			local Button = Instance.new("TextButton", TabContainer)
			Button.Name, Button.Size, Button.Font, Button.Text = buttonText, UDim2.new(0,193,0,24), Enum.Font.JosefinSans, " "..buttonText
			Button.BackgroundTransparency, Button.TextColor3, Button.TextSize, Button.TextXAlignment = 1, Color3.new(1,1,1), 14, Enum.TextXAlignment.Left
			local Note = Instance.new("TextLabel", Button)
			Note.Name, Note.BackgroundTransparency, Note.Position, Note.Size, Note.Font, Note.Text, Note.TextColor3, Note.TextSize, Note.TextXAlignment, Note.Visible =
				"Note", 1, UDim2.new(1.041,0,0,0), UDim2.new(0,193,0,24), Enum.Font.JosefinSans, note, Color3.fromRGB(0,255,0), 14, Enum.TextXAlignment.Left, false
			Button.MouseEnter:Connect(function() Note.Visible = true end)
			Button.MouseLeave:Connect(function() Note.Visible = false end)
			Button.MouseButton1Down:Connect(function()
				Button.TextColor3 = Color3.fromRGB(0,255,0)
				task.wait(0.05)
				Button.TextColor3 = Color3.new(1,1,1)
				pcall(callback)
			end)
			updateSize(TabContainer)
			updateSize(Container)
		end
		
		local function CreateToggle(buttonText, note, callback)
			local Button = Instance.new("TextButton", TabContainer)
			local Toggle = Instance.new("BoolValue", Button)
			Toggle.Name, Toggle.Value = "Toggled", false
			Button.Name, Button.Size, Button.Font, Button.Text = buttonText, UDim2.new(0,193,0,24), Enum.Font.JosefinSans, " "..buttonText
			Button.BackgroundTransparency, Button.TextColor3, Button.TextSize, Button.TextXAlignment = 1, Color3.new(1,1,1), 14, Enum.TextXAlignment.Left
			local Note = Instance.new("TextLabel", Button)
			Note.Name, Note.BackgroundTransparency, Note.Position, Note.Size, Note.Font, Note.Text, Note.TextColor3, Note.TextSize, Note.TextXAlignment, Note.Visible =
				"Note", 1, UDim2.new(1.041,0,0,0), UDim2.new(0,193,0,24), Enum.Font.JosefinSans, note, Color3.fromRGB(0,255,0), 14, Enum.TextXAlignment.Left, false
			Button.MouseEnter:Connect(function() Note.Visible = true end)
			Button.MouseLeave:Connect(function() Note.Visible = false end)
			Button.MouseButton1Down:Connect(function()
				Toggle.Value = not Toggle.Value
				Button.TextColor3 = Toggle.Value and Color3.fromRGB(0,255,0) or Color3.new(1,1,1)
				pcall(callback, Toggle.Value)
			end)
			updateSize(TabContainer)
			updateSize(Container)
		end
		
		local function CreateLabel(labelText, color3)
			local Label = Instance.new("TextLabel", TabContainer)
			Label.Name, Label.Size, Label.Font, Label.Text = labelText, UDim2.new(0,193,0,24), Enum.Font.JosefinSans, " "..labelText
			Label.BackgroundTransparency, Label.TextColor3, Label.TextSize, Label.TextXAlignment = 1, color3 or Color3.new(1,1,1), 14, Enum.TextXAlignment.Left
			updateSize(TabContainer)
			updateSize(Container)
		end
		
		local function CreateTextBox(text, placeholderText, callback)
			local TextBox = Instance.new("TextBox", TabContainer)
			TextBox.Name, TextBox.Size, TextBox.Font, TextBox.PlaceholderText = text, UDim2.new(0,193,0,24), Enum.Font.JosefinSans, placeholderText or ""
			TextBox.BackgroundTransparency, TextBox.TextColor3, TextBox.TextSize, TextBox.TextXAlignment, TextBox.ClearTextOnFocus = 1, Color3.new(1,1,1), 14, Enum.TextXAlignment.Left, true
			TextBox.FocusLost:Connect(function(enterPressed)
				if enterPressed then pcall(callback, TextBox.Text) end
			end)
			updateSize(TabContainer)
			updateSize(Container)
		end
		
		return {
			TabContainer = TabContainer,
			CreateButton = CreateButton,
			CreateToggle = CreateToggle,
			CreateLabel = CreateLabel,
			CreateTextBox = CreateTextBox,
		}
	end
	
	return {
		Root = Rodus,
		Top = Top,
		Container = Container,
		CreateTab = CreateTab,
	}
end

return CreateMain
